<!DOCTYPE html>
<html lang="es">
    <head>
        <title>UCM - Centro de Atención al Usuario</title>
        <meta charset="utf-8"/>
        <link rel="icon" type="image/x-icon" href="/img/logoucm.ico">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="stylesheet"  media="screen" href="/css/main.css"/>
        <link rel="stylesheet"  media="screen" href="/css/mis_avisos.css"/>
    </head>

    <body>
        <div class ="container-fluid">
            <div class="row d-flex cabecera align-items-center justify-content-center">
                <div class="col-xl-2 col-md-2 col-sm-3 col-3">
                    <img src="/img/ucm_logo2.png" id="logo">
                </div>
                <div class="col-xl-7 col-md-6 col-sm-3 col-3"><h1 class="titulo">Centro de Atención al Usuario</h1></div>
                <div class="col-xl-1 col-md-1 col-sm-1 col-1 mr-4">
                    <img src="/obtener_imagen" id= fotoPerfil />
                </div>
                <div class="col-xl-1 col-md-1 col-sm-3 col-4">
                    <h4 class="correo">elplan@ucm.es</h4>
                    <a class="btn btn-light btnBlanco" href="/cerrarSesion" role="button">Cerrar sesión</a>
                </div>
            </div>

            
                <nav class="navbar navbar-expand-sm navbar-light navMenu">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                      <ul class="navbar-nav">
                        <li class="nav-item active navActivo">
                          <a class="nav-link" href="/mis_avisos">Mis avisos</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="/historico_de_avisos">Histórico de Avisos</a>
                        </li>
                      </ul>
                    </div>
                  </nav>
            

            <div class="row buscador align-items-center">
                <div class="buscar">Buscar</div>
                <input type="text" class="col-3 form-control" onkeyup="buscador()" id="buscadorTabla">
                <button type="submit" class="btn btnRojo">Buscar</button>
            </div>

            <div class="col-10 tabla">
                <table class="table" id="t_avisos">
                    <thead class="thead-dark">
                      <tr>
                        <th scope="col"  style="width: 15%">Fecha</th>
                        <th scope="col"  style="width: 40%">Texto</th>
                        <th scope="col"  style="width: 15%">Tipo</th>
                        <th scope="col"  style="width: 15%">Técnico</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr onclick="abrirInfoAviso()">
                        <td class="fechaT">12/10/2021</td>
                        <td>No puedo conectar a la red corporativa. Parece que el fallo</td>
                        <td><img src="/img/exclamacion.png" width="40" height="40"/></td>
                        <td></td>
                      </tr>
                      <tr onclick="abrirInfoAviso()">
                        <td class="fechaT">10/10/2021</td>
                        <td>Propongo cambiar el diseño de la web a un modelo responsible para que se pueda visualizar</td>
                        <td><img src="/img/pregunta.png" width="40" height="40"/></td>
                        <td>Aitor Tilla</td>
                      </tr>
                      <tr onclick="abrirInfoAviso()">
                        <td class="fechaT">05/01/2021</td>
                        <td>Feliz año a todos vosotros por el buen trabajo realizado y las atenciones recibidas</td>
                        <td><img src="/img/me-gusta.png" width="40" height="40"/></td>
                        <td>Felipe Lotas</td>
                      </tr>
                    </tbody>
                  </table>
            </div>

            <div class="row nuevoAviso justify-content-center">
                <button type="button" class="btn btnRojo" data-bs-toggle="modal" data-bs-target="#nuevoAviso">Nuevo aviso</button>
            </div>
     
            <!-- Button trigger modal -->
            
        <!-- Modal INFO AVISO -->
              <div class="modal fade" id="infoAviso" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                        
                        <h5 class="modal-title" id="exampleModalLabel">Fernando Bellot</h5>
                          <div class="tAviso">
                            <h5 class="modal-title" id="exampleModalLabel">Aviso 3242342324232 - Sugerencia</h5>
                          </div>
                          
                          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                          </button>
                        
                        
                    </div>
                    <div class="modal-body">
                      Fecha: 02/01/2021 <br>
                      Comunicaciones: Correo Electrónico <br>
                      Perfil: PDI <br><br>
                      Observaciones: <br>
                      <textarea readonly id="obs" class="areaT" name="observaciones" rows="4"> At w3schools.com you will learn how to make a website. They offer free tutorials in all web development technologies.
                        </textarea> <br> <br>
                      Comentarios del técnico: <br>
                      <textarea readonly id="com_tec" class="areaT" name="comentario" rows="4"> At w3schools.com you will learn how to make a website. They offer free tutorials in all web development technologies.
                      </textarea> <br>
                      
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btnRojo" data-bs- data-bs-dismiss="modal">Cerrar</button>
                    </div>
                  
                  </div>
                </div>
              </div>

              <!-- Modal NUEVO AVISO -->
              <div class="modal fade" id="nuevoAviso" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                        
                        <h5 class="modal-title">Nuevo Aviso</h5>
                          
                          
                          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                          </button>
                        
                        
                    </div>

                    <div class="modal-body">
                      <div class="container-fluid">
                        <form id="nuevoAvisoForm" enctype="multipart/form-data" method="post" novalidate>
                          <div class="mb-3 labelBold">
                            Seleccione el tipo de aviso que desea realizar: <span class="rojoError labelBold" title="Es obligatorio rellenar este campo"> *</span>
                          </div>
                        <div class="row">
                          <div class="form-check ml-3">
                            <input class="form-check-input" type="radio" name="tipo" value="sugerencia" id="sug">
                            <label class="form-check-label" for="sug">Sugerencia</label>
                          </div>
                          <div class="form-check ml-2">
                            <input class="form-check-input" type="radio" name="tipo" value="incidencia" id="inc">
                            <label class="form-check-label" for="inc">Incidencia</label>
                          </div>
                          <div class="form-check ml-2">
                            <input class="form-check-input" type="radio" name="tipo" value="felicitacion" id="fel">
                            <label class="form-check-label" for="fel">Felicitación</label>
                          </div>
                        </div>
                        <div class="form-outline mb-4 mr-4 mt-3">
                          <label class="form-label labelBold" for="selectorCategoria">Categoría:</label><span class="rojoError labelBold" title="Es obligatorio rellenar este campo"> *</span>
                          <select class="form-control" id="selectorCategoria" name="categoria" onchange="">
                              <option value="adigital" selected>Administración digital</option>
                              <option value="comu">Comunicaciones</option>
                              <option value="conect">Conectividad</option>
                              <option value="docencia">Docencia</option>
                              <option value="web">Web</option>
                          </select>
                        </div>

                        <div class="form-outline mb-4 mr-4 mt-3" id="adigital">
                          <label class="form-label labelBold" for="selectorCategoria">Sugerencia/incidencia:</label><span class="rojoError labelBold" title="Es obligatorio rellenar este campo"> *</span>
                          <select class="form-control" id="selectorInc" name="categoria" onchange="">
                              <option value="cfisica" selected>Certificado digital de persona física</option>
                              <option value="cpublico">Certificado electrónico de empleado público</option>
                              <option value="registroElec">Registro electrónico</option>
                              <option value="sede">Sede electrónica</option>
                              <option value="portafirmas">Portafirmas</option>

                              <option value='sara' selected>Cuenta as la Red SARA</option>
                              <option value='conex'>Conexión por cable en despachos</option>
                              <option value='cortafuegos'>Cortafuegos corporativo</option>
                              <option value='dns'>Resolución de nombres de dominio (DNS)</option>
                              <option value='vpn'>VPN Acceso remoto</option>
                              <option value='eduroam'>Wifi Eduroam (ssid: eduroam)</option>
                              <option value='wifivis'>Wifi para visitantes (ssid: UCM-Visitantes)</option>

                          </select>
                        </div>

                        <div class="form-outline mt-3 mb-3">
                          <label class="labelBold" for="obs">Observaciones:</label><span class="rojoError labelBold" title="Es obligatorio rellenar este campo"> *</span>
                          <textarea class="form-control" id="obs" rows="3"></textarea>
                        </div>
                      
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs- data-bs-dismiss="modal">Cerrar</button>
                      <button type="submit" class="btn btnRojo">Enviar</button>
                    </div>

                  </form>
                  
                  </div>
                </div>
              </div>
            

        </div>
    
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
    
        <script>

          function abrirInfoAviso(){
            
            $('#infoAviso').modal('toggle');
            
          }

          function buscador() {
            // Declare variables
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("buscadorTabla");
            filter = input.value.toUpperCase();
            table = document.getElementById("t_avisos");
            tr = table.getElementsByTagName("tr");
            var z=1;
            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
              td = tr[i].getElementsByTagName("td")[1];
              if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
                } else {
                  tr[i].style.display = "none";
                  z++;
                }
              }
            }
            
          }

          $(document).ready(function () {
          $("#selectorCategoria").change(function () {
            switch($(this).val()) {
                case 'adigital':
                    $("#selectorInc").html("<option value='cfisica' selected>Certificado digital de persona física</option><option value='cpublico'>Certificado electrónico de empleado público</option><option value='registroElec'>Registro electrónico</option><option value='sede'>Sede electrónica</option><option value='portafirmas'>Portafirmas</option>");
                    break;
                case 'comu':
                    $("#selectorInc").html("<option value='correo' selected>Correo electrónico</option><option value='meet'>Google Meet</option><option value='calumno'>Cuenta de alumno</option><option value='cpersonal'>Cuenta de personal</option><option value='cgenerica'>Cuenta genérica</option>");
                    break;
                case 'conect':
                    $("#selectorInc").html("<option value='sara' selected>Cuenta as la Red SARA</option><option value='conex'>Conexión por cable en despachos</option><option value='cortafuegos'>Cortafuegos corporativo</option><option value='dns'>Resolución de nombres de dominio (DNS)</option><option value='vpn'>VPN Acceso remoto</option><option value='eduroam'>Wifi Eduroam (ssid: eduroam)</option><option value='wifivis'>Wifi para visitantes (ssid: UCM-Visitantes)</option>");
                    break;
                case 'docencia':
                    $("#selectorInc").html("<option value='test'>item3: test 1</option><option value='test2'>item3: test 2</option>");
                    break;
                case 'web':
                    $("#selectorInc").html("<option value='test'>item3: test 1</option><option value='test2'>item3: test 2</option>");
                    break;
                default:
                    $("#selectorInc").html("<option value='cfisica' selected>Certificado digital de persona física</option><option value='cpublico'>Certificado electrónico de empleado público</option><option value='registroElec'>Registro electrónico</option><option value='sede'>Sede electrónica</option><option value='portafirmas'>Portafirmas</option>");
                    
            }
          });
        });

        /*
          
          function cambiarOpciones() {
            let categoria = document.getElementById("selectorCategoria");
            console.log(categoria.value)
            switch(categoria.value) {
              case "adigital" : { document.getElementById("comu").style.display='none';
                document.getElementById("adigital").style.display='block';
                                  
                                }
              case "comu" : {document.getElementById("adigital").style.display='block';
                              document.getElementById("comu").style.display='block';
                                  
                                }
            }
          }
          */
        
        </script>

      </body>
    
    

    


</html>


<!--
<div class="row d-flex cabecera align-items-center">
                <div class="col-2">
                    <img src="ucm_logo2.png" class="img-fluid" width="330" height="330">
                </div>
                <div class="col-5"><h1 class="titulo">Centro de Atención al Usuario</h1></div>
                <div class="col-1 offset-xl-2 offset-lg-2 offset-1">
                    <img src="fernando-alonso-alpine-1.jpg" class="img-fluid foto" width="130" height="130"/>
                </div>
                <div class="col-1 offset-1 offset-md-0">
                    <h4 class="correo">elplan@ucm.es</h4>
                    <button type="submit" class="btn btn-light btblanco">Desconectar</button>
                </div>
            </div>

-->